import{r as i,j as e,a as re}from"./react-Tx0QjLq-.js";import{c as se}from"./react-dom-58QOy6Xd.js";import{d as k}from"./dayjs-CueLNDja.js";import{L as P,c as ne,R as oe}from"./react-router-dom-5vkDKYlb.js";import{m as H}from"./ag-grid-react-DPsXB4cJ.js";import"./ag-grid-community-yFlyaA0r.js";import{B as p,D as _,b,d as T,T as C,e as w,f as K,F as ae,A as ie,h as E,i as le,j as ce,k as $,l as q,m as U,I as W,S as B,O as Y,M as I,n as ue,o as G,p as R,q as y,G as L,C as D,r as O,s as N,L as de,t as he}from"./@mui-7u7OA-3J.js";import{f as me,O as je,g as pe,c as J}from"./react-router-ytgFBLxf.js";import{j as xe}from"./jwt-decode-lVtXelIf.js";import"./scheduler-iwWdm5Ml.js";import"./@remix-run-3FOxGI3Z.js";import"./@babel-R4VyUtW_.js";import"./prop-types-uEZj6ktQ.js";import"./clsx-Zbgk8kpT.js";import"./react-transition-group-qlB6mBpv.js";import"./dom-helpers-Xf6xszNR.js";import"./@emotion-YRMgewph.js";import"./hoist-non-react-statics-MGeNrgoW.js";import"./react-is-cHOZVpRJ.js";import"./stylis-UTZzoVRx.js";import"./@popperjs-zyV4rJhQ.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function o(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(n){if(n.ep)return;n.ep=!0;const t=o(n);fetch(n.href,t)}})();const V=i.createContext(),fe=({children:r})=>{const[s,o]=i.useState(localStorage.getItem("token"));i.useEffect(()=>{s?localStorage.setItem("token",s):localStorage.removeItem("token")});const a=i.useMemo(()=>({token:s,setToken:o}),[s]);return e.jsx(V.Provider,{value:a,children:r})},M=()=>i.useContext(V),v="http://softala.haaga-helia.fi:8060";async function Q(r){return fetch(`${v}/projects`,{headers:{Authorization:r}}).catch(o=>console.error(o)).then(o=>o.json())}async function ge(r,s){return fetch(`${v}/projects`,{method:"post",headers:{Authorization:r,"Content-Type":"application/json"},body:JSON.stringify(s)}).catch(a=>console.error(a))}async function ye(r,s){return fetch(`${v}/projects/${s.id}`,{method:"put",headers:{Authorization:r,"Content-Type":"application/json"},body:JSON.stringify(s)}).catch(a=>console.error(a))}async function ke(r,s){return fetch(`${v}/projects/${s}`,{method:"delete",headers:{Authorization:r}}).catch(a=>console.error(a))}function Ce({token:r,setAlert:s,fetchProjects:o}){const a={title:""},[n,t]=i.useState(a),[l,h]=i.useState(""),[u,j]=i.useState(!1),c=f=>{t({...n,[f.target.name]:f.target.value})},m=()=>{if(n.title.trim()==="")h("Nimi ei voi olla tyhjä");else try{ge(r,n).then(f=>{f.ok?(console.log("Project added successfully"),o(),s("success")):(console.error("Failed to add project"),s("error"))}),d()}catch(f){console.error("Error adding project:",f),h("Error adding project")}},d=()=>{t(a),h(""),j(!1)};return e.jsxs("div",{style:{marginTop:20},children:[e.jsx(p,{variant:"contained",onClick:()=>j(!0),children:"Lisää uusi projekti"}),e.jsxs(_,{open:u,onClose:()=>j(!1),children:[e.jsx(b,{children:"Lisää uusi projekti"}),e.jsx(T,{children:e.jsx(C,{autoFocus:!0,required:!0,margin:"normal",fullWidth:!0,name:"title",label:"Projektin nimi",type:"text",onChange:f=>c(f),error:l!=="",helperText:l})}),e.jsxs(w,{children:[e.jsx(p,{onClick:d,children:"Peruuta"}),e.jsx(p,{onClick:m,children:"Tallenna"})]})]})]})}function ve({token:r,id:s,setAlert:o,fetchProjects:a}){const[n,t]=i.useState(!1),l=()=>{t(!0)},h=()=>{t(!1)},u=()=>{ke(r,s).then(j=>{j.ok?(a(),o("info")):o("error")}),t(!1)};return e.jsxs("div",{children:[e.jsx(p,{variant:"outlined",color:"error",size:"small",onClick:l,children:"Poista"}),e.jsxs(_,{open:n,onClose:h,children:[e.jsx(b,{id:"alert-dialog-title",children:"Poista projekti"}),e.jsx(T,{children:e.jsx(K,{id:"alert-dialog-description",children:"Haluatko varmasti poistaa kyseisen projektin?"})}),e.jsxs(w,{children:[e.jsx(p,{onClick:h,children:"Peruuta"}),e.jsx(p,{color:"error",onClick:u,autoFocus:!0,children:"Poista projekti"})]})]})]})}async function Pe(r){return fetch(`${v}/login`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify(r)})}async function Se(r){return fetch(`${v}/users`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).catch(o=>console.error(o))}async function be(r,s){return fetch(`${v}/users/byusername/${s}`,{headers:{Authorization:r}}).catch(a=>console.error(a)).then(a=>a.json())}function Te({token:r,editData:s,setAlert:o,fetchProjects:a}){const[n,t]=i.useState({title:s.title||"",id:s.id||""}),[l,h]=i.useState(),[u,j]=i.useState(),[c,m]=i.useState(""),[d,f]=i.useState(""),[A,x]=i.useState(!1),X=g=>{t({...n,[g.target.name]:g.target.value})},Z=g=>{j(g.target.value)},ee=()=>{be(r,u).then(g=>{h(g),console.log("added "+l),console.log("username "+u),f("")}).catch(g=>{f("Käyttäjätunnusta ei onnistuttu hakemaan."),console.error(g)})},te=async()=>{if(n.title.trim()==="")m("Nimi ei voi olla tyhjä");else try{ye(r,n).then(g=>{g.ok?(console.log("Project edited successfully"),a(),o("success"),F()):(console.error("Failed to edit project"),m("Failed to edit project"),o("error"))})}catch(g){console.error("Error editing project:",g),m("Error editing project")}},F=()=>{t({title:""}),m(""),x(!1)};return e.jsxs("div",{children:[e.jsx(p,{variant:"contained",size:"small",onClick:()=>x(!0),children:"Muokkaa"}),e.jsxs(_,{open:A,onClose:()=>x(!1),children:[e.jsx(b,{children:"Muokkaa projektia"}),e.jsx(T,{children:e.jsx(C,{autoFocus:!0,required:!0,margin:"normal",fullWidth:!0,name:"title",label:"Projektin nimi",type:"text",value:n.title,onChange:X,error:c!=="",helperText:c})}),e.jsx(b,{style:{fontSize:"16px"},children:"Lisää käyttäjiä projektille"}),e.jsxs(T,{children:[e.jsx(C,{autoFocus:!0,required:!0,margin:"normal",fullWidth:!0,name:"username",label:"Hae käyttäjänimellä",type:"text",onChange:Z,error:d!=="",helperText:d}),e.jsx(p,{onClick:ee,children:"Hae käyttäjä"})]}),e.jsxs(w,{children:[e.jsx(p,{onClick:F,children:"Peruuta"}),e.jsx(p,{onClick:te,children:"Tallenna kaikki muutokset"})]})]})]})}const S=({alert:r,alertMessage:s,setAlert:o})=>{const[a,n]=i.useState(!0);return e.jsx(ae,{in:a,timeout:{enter:1e3,exit:1e3},addEndListener:()=>{setTimeout(()=>{n(!1),o(null)},3e3)},children:e.jsx(ie,{severity:r,children:s})})},Ee=()=>{const{token:r}=M(),[s,o]=i.useState([]),[a,n]=i.useState(null),t=i.useMemo(()=>{switch(a){case"success":return e.jsx(S,{alert:a,alertMessage:"Kirjaus tallennettu onnistuneesti",setAlert:n});case"info":return e.jsx(S,{alert:a,alertMessage:"Kirjaus poistettu onnistuneesti",setAlert:n});case"error":return e.jsx(S,{alert:a,alertMessage:"Kirjauksen tallennus epäonnistui",setAlert:n});default:return e.jsx(e.Fragment,{})}},[a]),l=()=>{Q(r).then(j=>o(j))};i.useEffect(l,[]);const[h,u]=i.useState([{field:"project.title",headerName:"Projekti"},{field:"role",headerName:"Rooli"},{field:"project.id",headerName:"Muokkaa",cellRenderer:j=>j.data.role==="OWNER"?e.jsx(Te,{token:r,editData:j.data.project,setAlert:n,fetchProjects:l}):null},{field:"project.id",headerName:"Poista",cellRenderer:j=>j.data.role==="OWNER"?e.jsx(ve,{token:r,id:j.value,setAlert:n,fetchProjects:l}):null}]);return e.jsxs("div",{className:"ag-theme-quartz",style:{height:400,marginTop:10},children:[t,e.jsx(H.AgGridReact,{rowData:s,columnDefs:h,defaultColDef:{sortable:!0,filter:!0,floatingFilter:!0},paginationAutoPageSize:!0,paginateChildRows:!0,autoSizeStrategy:{type:"fitCellContents"}}),e.jsx(Ce,{token:r,setAlert:n,fetchProjects:l})]})},_e=()=>{const{token:r}=M();me();const[s,o]=i.useState(0),[a,n]=i.useState(0),t=(h,u)=>{o(u)},l=(h,u)=>{n(u)};return e.jsxs(E,{children:[e.jsx(le,{position:"static",sx:{flexGrow:1},children:e.jsxs(ce,{children:[e.jsx("div",{style:{flexGrow:1},children:r?e.jsxs($,{value:s,onChange:t,textColor:"inherit",children:[e.jsx(q,{component:P,to:"/",label:"Etusivu"}),e.jsx(q,{component:P,to:"projectlist",label:"Projektit"}),e.jsx(q,{component:P,to:"entrylist",label:"Tuntikirjaukset"})]}):null}),e.jsx($,{value:a,onChange:l,textColor:"inherit",children:r?e.jsx(q,{component:P,to:"logout",label:"Kirjaudu ulos"}):e.jsx(q,{component:P,to:"login",label:"Kirjaudu sisään"})})]})}),e.jsx(je,{})]})};async function we(r){return fetch(`${v}/entries`,{headers:{Authorization:r}}).catch(o=>console.error(o)).then(o=>o.json())}async function Me(r,s,o){return fetch(`${v}/projects/${o}/entries`,{method:"post",headers:{Authorization:r,"Content-Type":"application/json"},body:JSON.stringify(s)}).catch(n=>console.error(n))}async function qe(r,s){return fetch(`${v}/projects/${s.project.id}/entries/${s.entry_id}`,{method:"put",headers:{Authorization:r,"Content-Type":"application/json"},body:JSON.stringify(s)}).catch(a=>console.error(a))}async function Le(r,s){return fetch(`${v}/entries/${s}`,{method:"delete",headers:{Authorization:r}}).catch(a=>console.error(a))}const Ae=({token:r,projects:s,setAlert:o,fetchEntries:a})=>{const n={entry_date:k().format("YYYY-MM-DD"),start_time:k().format("HH:mm:ss"),end_time:k().add(6,"h").format("HH:mm:ss"),comment:""},[t,l]=i.useState(n),[h,u]=i.useState(""),[j,c]=i.useState(""),[m,d]=i.useState(!1),f=()=>{h?(Me(r,t,h).then(x=>{x.ok?(a(),o("success")):o("error")}),A()):c("Valitse projekti")},A=()=>{l(n),u(""),d(!1)};return e.jsxs("div",{style:{marginTop:20},children:[e.jsx(p,{variant:"contained",onClick:()=>d(!0),children:"Lisää uusi kirjaus"}),e.jsxs(_,{open:m,onClose:()=>d(!1),children:[e.jsx(b,{children:"Uusi työaikakirjaus"}),e.jsxs(T,{children:[e.jsx(E,{component:"form",sx:{display:"flex",flexWrap:"wrap"},children:e.jsxs(U,{sx:{width:550,marginTop:"3px"},error:j!=="",children:[e.jsx(W,{htmlFor:"project",children:"Projekti"}),e.jsx(B,{name:"project",value:h,onChange:x=>{u(x.target.value),c("")},input:e.jsx(Y,{label:"Projekti"}),children:s?s.map(x=>e.jsx(I,{value:x.project.id,children:x.project.title},x.project.id)):null}),e.jsx(ue,{children:j})]})}),e.jsx(G,{sx:{width:550,marginTop:1,marginBottom:1},label:"Päivämäärä",name:"entry_date",value:k(t.entry_date),onChange:x=>l({...t,entry_date:x.format("YYYY-MM-DD")})}),e.jsx(R,{sx:{marginRight:"5px",width:270},label:"Aloitusaika",name:"start_time",value:k(`2024-01-01 ${t.start_time}`),onChange:x=>l({...t,start_time:x.format("HH:mm:ss")})}),e.jsx(R,{sx:{marginLeft:"5px",width:270},label:"Lopetusaika",name:"end_time",value:k(`2024-01-01 ${t.end_time}`),onChange:x=>l({...t,end_time:x.format("HH:mm:ss")}),minTime:k(`2024-01-01 ${t.start_time}`)}),e.jsx(C,{fullWidth:!0,autoFocus:!0,margin:"dense",name:"comment",label:"Muistiinpanot",type:"text",onChange:x=>l({...t,comment:x.target.value})})]}),e.jsxs(w,{children:[e.jsx(p,{onClick:A,children:"Peruuta"}),e.jsx(p,{onClick:f,children:"Tallenna"})]})]})]})};function De({token:r,entry_id:s,setAlert:o,fetchEntries:a}){const[n,t]=i.useState(!1),l=()=>{Le(r,s).then(h=>{h.ok?(a(),o("info")):o("error")}),t(!1)};return e.jsxs("div",{children:[e.jsx(p,{variant:"outlined",color:"error",size:"small",onClick:()=>t(!0),children:"Poista"}),e.jsxs(_,{open:n,onClose:()=>t(!1),children:[e.jsx(b,{children:"Poista työaikakirjaus"}),e.jsx(T,{children:e.jsx(K,{children:"Vahvista työaikakirjauksen poisto."})}),e.jsxs(w,{children:[e.jsx(p,{onClick:()=>t(!1),children:"Peruuta"}),e.jsx(p,{color:"error",onClick:l,autoFocus:!0,children:"Poista kirjaus"})]})]})]})}const Oe=({token:r,oldEntry:s,setAlert:o,fetchEntries:a})=>{const n={entry_id:"",entry_date:"",start_time:"",end_time:"",comment:"",project:{id:"",title:""}},[t,l]=i.useState(n),[h,u]=i.useState(!1),j=()=>{l(s),u(!0)},c=()=>{l(n),u(!1)},m=()=>{qe(r,t).then(d=>{d.ok?(a(),o("success")):o("error")}),c()};return e.jsxs("div",{children:[e.jsx(p,{variant:"contained",size:"small",onClick:j,children:"Muokkaa"}),e.jsxs(_,{open:h,onClose:()=>u(!1),children:[e.jsx(b,{children:"Muokkaa työaikakirjausta"}),e.jsxs(T,{children:[e.jsx(E,{component:"form",sx:{display:"flex",flexWrap:"wrap"},children:e.jsxs(U,{sx:{width:550,marginTop:"3px"},children:[e.jsx(W,{htmlFor:"project",children:"Projekti"}),e.jsx(B,{disabled:!0,name:"id",value:t.project.id,onChange:d=>handleChange(d),input:e.jsx(Y,{label:"Projekti"}),children:e.jsx(I,{value:t.project.id,children:t.project.title},t.project.id)})]})}),e.jsx(G,{sx:{width:550,marginTop:1,marginBottom:1},label:"Päivämäärä",name:"entry_date",value:k(t.entry_date),onChange:d=>l({...t,entry_date:d.format("YYYY-MM-DD")})}),e.jsx(R,{sx:{marginRight:"5px",width:270},name:"start_time",label:"Aloitusaika",value:k(`2024-01-01 ${t.start_time}`),onChange:d=>l({...t,start_time:d.format("HH:mm:ss")})}),e.jsx(R,{sx:{marginLeft:"5px",width:270},name:"end_time",label:"Lopetusaika",value:k(`2024-01-01 ${t.end_time}`),onChange:d=>l({...t,end_time:d.format("HH:mm:ss")}),minTime:k(`2024-01-01 ${t.start_time}`)}),e.jsx(C,{fullWidth:!0,margin:"dense",name:"entry",label:"Muistiinpanot",value:t.comment,type:"text",onChange:d=>l({...t,comment:d.target.value})})]}),e.jsxs(w,{children:[e.jsx(p,{onClick:c,children:"Peruuta"}),e.jsx(p,{onClick:m,children:"Tallenna"})]})]})]})},Ne=()=>{const{token:r}=M(),[s,o]=i.useState([]),[a,n]=i.useState([]),[t,l]=i.useState(null),h=i.useMemo(()=>{switch(t){case"success":return e.jsx(S,{alert:t,alertMessage:"Kirjaus tallennettu onnistuneesti",setAlert:l});case"info":return e.jsx(S,{alert:t,alertMessage:"Kirjaus poistettu onnistuneesti",setAlert:l});case"error":return e.jsx(S,{alert:t,alertMessage:"Kirjauksen tallennus epäonnistui",setAlert:l});default:return e.jsx(e.Fragment,{})}},[t]),u=()=>{we(r).then(d=>o(d))};i.useEffect(u,[]);const j=()=>{Q(r).then(d=>n(d))};i.useEffect(j,[]);const[c,m]=i.useState([{field:"project.title",headerName:"Projekti"},{field:"entry_date",headerName:"Päivämäärä"},{field:"start_time",headerName:"Aloitusaika"},{field:"end_time",headerName:"Lopetusaika"},{field:"comment",headerName:"Muistiinpanot"},{field:"entry_id",headerName:"Muokkaa",sortable:!1,filter:!1,width:110,cellRenderer:d=>e.jsx(Oe,{token:r,oldEntry:d.data,setAlert:l,fetchEntries:u})},{field:"entry_id",headerName:"Poista",sortable:!1,filter:!1,width:100,cellRenderer:d=>e.jsx(De,{token:r,entry_id:d.value,setAlert:l,fetchEntries:u})}]);return e.jsxs("div",{className:"ag-theme-quartz",style:{height:400,marginTop:10},children:[h,e.jsx(H.AgGridReact,{rowData:s,columnDefs:c,defaultColDef:{sortable:!0,filter:!0,floatingFilter:!0},paginationAutoPageSize:!0,paginateChildRows:!0,autoSizeStrategy:{type:"fitCellContents"}}),e.jsx(Ae,{token:r,projects:a,setAlert:l,fetchEntries:u})]})};function Re(){const r=pe();return console.log(r),e.jsxs("div",{children:[e.jsx("h1",{children:"Page not found"}),e.jsx("p",{children:r.data})]})}const Fe=()=>{const{token:r}=M(),s=xe(r),{id:o,first_name:a,last_name:n}=s;return console.log(s),e.jsxs(E,{style:{paddingLeft:40,paddingRight:40},children:[a&&n?e.jsxs(y,{variant:"h6",style:{marginTop:30,marginBottom:40},children:["Hei ",a+" "+n,"!"]}):e.jsx(y,{variant:"h6",style:{marginTop:30,marginBottom:40},children:"Hei!"}),e.jsxs(L,{container:!0,spacing:2,children:[e.jsx(L,{item:!0,children:e.jsxs(D,{sx:{maxWidth:300},children:[" ",e.jsx(O,{component:P,to:"/projectlist",children:e.jsxs(N,{children:[e.jsx(y,{gutterBottom:!0,variant:"h5",component:"div",children:"Projektit"}),e.jsx(y,{variant:"body2",color:"text.secondary",children:"Listaus kaikista projekteistasi. Lisää uusia projekteja sekä muokkaa niitä."})]})})]})}),e.jsx(L,{item:!0,children:e.jsxs(D,{sx:{maxWidth:300},children:[" ",e.jsx(O,{component:P,to:"/entrylist",children:e.jsxs(N,{children:[e.jsx(y,{gutterBottom:!0,variant:"h5",component:"div",children:"Tuntikirjaukset"}),e.jsx(y,{variant:"body2",color:"text.secondary",children:"Näe kaikki tuntikirjaukset samasta näkymästä. Lisää ja muokkaa kirjauksia."})]})})]})}),e.jsx(L,{item:!0,children:e.jsxs(D,{sx:{maxWidth:300},children:[" ",e.jsx(O,{children:e.jsxs(N,{children:[e.jsx(y,{gutterBottom:!0,variant:"h5",component:"div",children:"Omat tiedot"}),e.jsx(y,{variant:"body2",color:"text.secondary",children:"(LINKKI UUPUU) Tarkastele ja muokkaa omia tietojasi."})]})})]})}),e.jsx(L,{item:!0,children:e.jsxs(D,{sx:{maxWidth:300},children:[" ",e.jsx(O,{component:P,to:"/projectlist",children:e.jsxs(N,{children:[e.jsx(y,{gutterBottom:!0,variant:"h5",component:"div",children:"Käyttäjien hallinta"}),e.jsx(y,{variant:"body2",color:"text.secondary",children:"Hallitse projektien käyttäjiä kyseisen projektin muokkausnäkymästä."})]})})]})})]})]})},$e=({setAlert:r})=>{const s={username:"",password_hash:"",first_name:"",last_name:""},[o,a]=i.useState(s),[n,t]=i.useState(!1),[l,h]=i.useState(!1),u=m=>{a({...o,[m.target.name]:m.target.value})},j=()=>{if(o.password_hash.length<7)t(!0);else try{Se(o).then(m=>{m.ok?(console.log("User added successfully"),r("success")):(console.error("Failed to add user"),r("error"))}),c()}catch(m){console.error("Error adding new user:",m)}},c=()=>{a(s),t(!1),h(!1)};return e.jsxs("div",{style:{marginTop:20},children:[e.jsx(p,{variant:"contained",onClick:()=>h(!0),children:"Rekisteröidy"}),e.jsxs(_,{open:l,onClose:c,PaperProps:{component:"form",onSubmit:m=>{m.preventDefault(),j()}},children:[e.jsx(b,{children:"Rekisteröidy"}),e.jsxs(T,{children:[e.jsx(C,{autoFocus:!0,required:!0,margin:"normal",fullWidth:!0,name:"username",label:"Käyttäjänimi",type:"text",onChange:m=>u(m)}),e.jsx(C,{required:!0,margin:"normal",fullWidth:!0,name:"password_hash",label:"Salasana",type:"password",autoComplete:"password",onChange:m=>u(m),error:n,helperText:"Vähimmäispituus 8 merkkiä"}),e.jsx(C,{required:!0,margin:"normal",fullWidth:!0,name:"first_name",label:"Etunimi",type:"text",onChange:m=>u(m)}),e.jsx(C,{required:!0,margin:"normal",fullWidth:!0,name:"last_name",label:"Sukunimi",type:"text",onChange:m=>u(m)})]}),e.jsxs(w,{children:[e.jsx(p,{onClick:c,children:"Peruuta"}),e.jsx(p,{type:"submit",children:"Tallenna"})]})]})]})},z=()=>{const{setToken:r}=M(),s=J(),[o,a]=i.useState({username:"",password:""}),[n,t]=i.useState(null),l=i.useMemo(()=>{switch(n){case"success":return e.jsx(S,{alert:n,alertMessage:"Käyttäjä rekisteröity onnistuneesti",setAlert:t});case"error":return e.jsx(S,{alert:n,alertMessage:"Käyttäjän rekisteröinti epäonnistui",setAlert:t});default:return e.jsx(e.Fragment,{})}},[n]),h=c=>{a({...o,[c.target.name]:c.target.value})},u=()=>{Pe(o).then(c=>{if(c.ok)r(c.headers.get("Authorization")),s("/",{replace:!0});else throw n("Wrong username or password"),new Error("Error in fetch:"+c.statusText)}).catch(c=>console.error(c))},j=c=>{c.preventDefault(),u()};return e.jsxs(E,{children:[l,e.jsx(y,{variant:"h5",style:{margin:20},children:"Työaikakirjausjärjestelmä"}),e.jsx(y,{style:{marginLeft:20,marginBottom:20},children:"Kirjaudu sovellukseen tai rekisteröidy uudeksi käyttäjäksi"}),e.jsxs(E,{component:"form",onSubmit:j,sx:{margin:2},children:[e.jsx(C,{style:{marginRight:6,marginBottom:6},autoFocus:!0,required:!0,name:"username",label:"Käyttäjänimi",id:"username",autoComplete:"username",value:o.username,onChange:c=>h(c)}),e.jsx(C,{required:!0,name:"password",label:"Salasana",id:"password",type:"password",autoComplete:"current-password",value:o.password,onChange:c=>h(c)}),e.jsx(p,{style:{marginLeft:6},variant:"contained",type:"submit",children:"Kirjaudu"})]}),e.jsx(E,{sx:{margin:2,marginTop:6},children:e.jsx($e,{setAlert:t})})]})},ze=()=>{const{setToken:r}=M(),s=J();return i.useEffect(()=>{setTimeout(()=>{r(""),s("/",{replace:!0})},1e3)},[]),e.jsx("h1",{children:"Sinut on kirjattu ulos"})};function He(){const{token:r}=M(),s=[{index:!0,path:"/",element:e.jsx(z,{})},{index:!0,path:"/login",element:e.jsx(z,{})}],o=[{index:!0,element:e.jsx(Fe,{})},{path:"/projectlist",element:e.jsx(Ee,{})},{path:"/entrylist",element:e.jsx(Ne,{})},{path:"/logout",element:e.jsx(ze,{})}],a=ne([{element:e.jsx(_e,{}),errorElement:e.jsx(Re,{}),children:[...r?[]:s,...o]}]);return e.jsx(oe,{router:a})}function Ke(){return e.jsx(de,{dateAdapter:he,adapterLocale:"fi",children:e.jsx(fe,{children:e.jsx(He,{})})})}se.createRoot(document.getElementById("root")).render(e.jsx(re.StrictMode,{children:e.jsx(Ke,{})}));
